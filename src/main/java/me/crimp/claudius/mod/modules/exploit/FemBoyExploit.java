package me.crimp.claudius.mod.modules.exploit;

import me.crimp.claudius.event.events.PacketEvent;
import me.crimp.claudius.mod.command.Command;
import me.crimp.claudius.mod.modules.Module;
import net.minecraft.client.Minecraft;
import net.minecraft.entity.Entity;
import net.minecraft.network.play.client.*;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent;

public class FemBoyExploit extends Module {
    public FemBoyExploit() {
        super("FemBoyExploit", "FemBoyExploit", Category.EXPLOIT, true, false, false);
    }

    private Entity e = null;
    @Override
    public void onEnable() {
            if (mc.player == null)
            {
                e = null;
                toggle();
                return;
            }

            if (!mc.player.isRiding())
            {
                e = null;
                toggle();
                return;
            }

            e = mc.player.getRidingEntity();

            mc.player.dismountRidingEntity();
            mc.world.removeEntity(e);
        }

        @Override
        public void onDisable()
        {
            if (e != null)
            {
                e.isDead = false;
                if (!mc.player.isRiding())
                {
                    mc.world.spawnEntity(e);
                    mc.player.startRiding(e, true);
                }
                e = null;
            }
        }

        @SubscribeEvent
        public void onTick(TickEvent.ClientTickEvent event)
        {
            if (e == null || mc.player.isRiding() || mc.player == null || mc.world == null) return;

            mc.player.onGround = true;

            e.setPosition(mc.player.posX, mc.player.posY, mc.player.posZ);

            mc.player.connection.sendPacket(new CPacketVehicleMove(e));
        }

        @SubscribeEvent
        public void onPacket(PacketEvent event)
        {
            if ((event.getPacket() instanceof CPacketInput) || (event.getPacket() instanceof CPacketPlayer.Position) || (event.getPacket() instanceof CPacketPlayer.PositionRotation) || (event.getPacket() instanceof CPacketPlayer.Rotation) || (event.getPacket() instanceof CPacketPlayerAbilities) || (event.getPacket() instanceof CPacketPlayerDigging) || (event.getPacket() instanceof CPacketPlayerTryUseItem || (event.getPacket() instanceof CPacketPlayerTryUseItemOnBlock) || (event.getPacket() instanceof CPacketUseEntity) || (event.getPacket() instanceof CPacketVehicleMove)))
            {
                event.setCanceled(true);
            }
        }
    }
















        /*if (!mc.isSingleplayer()) {
                String serverName = Minecraft.getMinecraft().currentServerData.serverIP;
                Command.sendMessage("if ur on " + serverName + " this wont help u");
                } else {
                Command.sendMessage("Dumbass Its a MultiPlayer Exploit");
                }this.enabled.setValue(Boolean.FALSE); }*/